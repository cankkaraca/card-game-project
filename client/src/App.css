@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Poppins:wght@300;400;600&display=swap');

:root {
  --bg-dark: #0f172a;
  --spotlight: #FFD700;
  --accent: #ff0055;
  --felt-green: #2e7d32;
  --bumper-color: #2d1b13;
}

body {
  margin: 0;
  color: white;
  font-family: 'Poppins', sans-serif;
  overflow: hidden;
  height: 100vh;
  background: linear-gradient(-45deg, #0f172a, #1e1b4b, #312e81, #0f172a);
  background-size: 400% 400%;
  animation: gradientBG 15s ease infinite;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

@keyframes gradientBG {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.scene-container { width: 100vw; height: 100vh; display: flex; align-items: center; justify-content: center; position: relative; }

/* KONTROLLER */
.top-controls { position: absolute; top: 20px; right: 20px; display: flex; gap: 10px; z-index: 5000; }
.icon-btn { background: rgba(255, 255, 255, 0.1); padding: 10px; border-radius: 50%; cursor: pointer; transition: 0.3s; border: 1px solid rgba(255,255,255,0.1); color: white; display: flex; align-items: center; justify-content: center; }
.icon-btn:hover { background: white; color: black; transform: scale(1.1); }
.disabled-icon { opacity: 0.5; cursor: not-allowed; }

/* MODAL */
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 3000; display: flex; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
.modal-box { background: #1e293b; border: 2px solid var(--spotlight); padding: 25px; border-radius: 20px; max-width: 400px; width: 90%; box-shadow: 0 0 50px rgba(0,0,0,0.5); position: relative; z-index: 3001; }
.modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px; }
.modal-header h2 { margin: 0; color: var(--spotlight); font-size: 1.5rem; }
.close-icon { background: none; border: none; color: #cbd5e1; cursor: pointer; }
.setting-row { margin-bottom: 15px; text-align: left; }
.setting-row label { display: block; font-size: 0.9rem; margin-bottom: 5px; color: #94a3b8; }
.setting-row input { padding: 10px; width: 100%; background: rgba(0,0,0,0.3); border: 1px solid #475569; color: white; border-radius: 8px; box-sizing: border-box; }
.player-list-manage { max-height: 200px; overflow-y: auto; margin-top: 10px; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 10px; }
.manage-item { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
.kick-btn { background: #ef4444; color: white; border: none; padding: 5px 10px; border-radius: 5px; font-size: 0.7rem; cursor: pointer; display: flex; align-items: center; gap: 5px; }

/* LOGIN */
.login-screen { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); padding: 40px; border-radius: 30px; text-align: center; z-index: 50; max-width: 450px; width: 90%; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
.login-title { font-family: 'Montserrat', sans-serif; font-size: 3rem; margin-bottom: 20px; background: linear-gradient(to bottom, #fff, #FFD700); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-transform: uppercase; filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.5)); }
.input-group label { font-size: 0.8rem; color: #cbd5e1; margin-bottom: 5px; margin-top: 8px; display: block; font-weight: 600; }
input { width: 100%; padding: 15px; background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.1); border-radius: 12px; color: white; box-sizing: border-box; font-size: 1rem; transition: 0.3s; }
input:focus { outline: none; border-color: var(--spotlight); background: rgba(0,0,0,0.5); }
.split-inputs { display: flex; gap: 15px; }
.split-inputs .input-group { flex: 1; }
.action-btn { width: 100%; padding: 18px; border-radius: 15px; border: none; font-weight: 800; cursor: pointer; background: linear-gradient(45deg, #FFD700, #FDB931); color: #1a1a1a; font-size: 1.1rem; display: flex; justify-content: center; gap: 10px; align-items: center; margin-top: 20px; text-transform: uppercase; box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4); transition: transform 0.2s; }
.action-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(255, 215, 0, 0.6); }
.avatar-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-bottom: 20px;}
.avatar-option { border-radius: 50%; cursor: pointer; border: 3px solid transparent; opacity: 0.5; transition: 0.3s; overflow: hidden; aspect-ratio: 1/1; background: rgba(255,255,255,0.1); }
.avatar-option.selected { border-color: var(--spotlight); opacity: 1; transform: scale(1.15); box-shadow: 0 0 15px var(--spotlight); }
.avatar-option img { width: 100%; height: 100%; display: block; }

/* OYUN ALANI */
.game-layout { width: 100%; height: 100%; position: relative; display: flex; align-items: center; justify-content: center; overflow: hidden; }
.room-info { position: absolute; top: 20px; left: 20px; background: rgba(0,0,0,0.4); backdrop-filter: blur(5px); padding: 10px 25px; border-radius: 50px; z-index: 50; border: 1px solid rgba(255,255,255,0.1); display: flex; align-items: center; gap: 15px; }
.room-info h2 { font-size: 1.2rem; margin: 0; color: var(--spotlight); }

/* BUTONLAR */
.start-game-btn { 
    background: #10b981; color: white; border: none; padding: 15px 50px; border-radius: 50px; cursor: pointer; font-weight: 800; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; box-shadow: 0 0 30px rgba(16, 185, 129, 0.4); transition: all 0.2s; text-transform: uppercase; white-space: nowrap; z-index: 200; 
}
.start-game-btn:hover { transform: scale(1.05); box-shadow: 0 0 50px rgba(16, 185, 129, 0.8); }
.start-game-btn:disabled { opacity: 0.6; cursor: not-allowed; filter: grayscale(1); }
.finish-vote-btn { 
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #f59e0b; color: white; border: none; padding: 15px 50px; border-radius: 50px; cursor: pointer; font-weight: 800; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; box-shadow: 0 0 30px rgba(245, 158, 11, 0.4); z-index: 200; transition: all 0.2s; text-transform: uppercase;
}
.finish-vote-btn:hover { transform: translate(-50%, -50%) scale(1.1); }

/* SİYAH KART */
.black-card-display { 
    position: absolute; top: 5%; left: 50%; transform: translateX(-50%); background: #1a1a1a; color: white; padding: 20px 40px; border-radius: 20px; border: 1px solid #333; max-width: 600px; width: 80%; text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.8); z-index: 40; font-size: 1.2rem; font-weight: 600; font-family: 'Montserrat', sans-serif; display: flex; flex-direction: column; align-items: center; gap: 10px; 
}
.pick-badge { background: var(--accent); color: white; font-size: 0.9rem; font-weight: 800; padding: 6px 15px; border-radius: 20px; box-shadow: 0 0 20px var(--accent); animation: pulse 2s infinite; }
@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

/* MASA */
.table-wrapper { position: relative; width: 600px; height: 600px; display: flex; justify-content: center; align-items: center; transition: transform 0.3s; margin-top: 20px; z-index: 10; }
.player-seat { position: absolute; transform: translate(-50%, -50%); display: flex; flex-direction: column; align-items: center; transition: all 0.5s ease; }
.avatar-frame { width: 70px; height: 70px; border-radius: 50%; border: 4px solid #334155; background: #0f172a; overflow: visible; box-shadow: 0 10px 20px rgba(0,0,0,0.5); z-index: 10; position: relative; transition: 0.3s; }
.avatar-frame.me { border-color: var(--spotlight); box-shadow: 0 0 30px rgba(255, 215, 0, 0.3); width: 85px; height: 85px; }
.avatar-frame.czar-frame { border-color: gold; box-shadow: 0 0 40px gold; }
.avatar-frame img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; overflow: hidden;}
.ready-indicator { position: absolute; top: 0; right: -5px; background: #22c55e; color: white; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 3px solid #0f172a; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
.whistle-indicator { position: absolute; top: -25px; left: 50%; transform: translateX(-50%); filter: drop-shadow(0 0 10px gold); animation: float 2s infinite ease-in-out; z-index: 20; }
@keyframes float { 0%, 100% { transform: translateX(-50%) translateY(0); } 50% { transform: translateX(-50%) translateY(-8px); } }
.player-nametag { margin-top: -15px; background: #1e293b; padding: 5px 15px; border-radius: 20px; font-size: 12px; font-weight: bold; border: 2px solid #334155; z-index: 11; position: relative; display: flex; align-items: center; box-shadow: 0 5px 10px rgba(0,0,0,0.3); white-space: nowrap; }
.me .player-nametag { border-color: var(--spotlight); color: var(--spotlight); }

/* SKOR TABLOSU */
.scoreboard { position: absolute; right: 20px; top: 50%; transform: translateY(-50%); width: 220px; background: rgba(15, 23, 42, 0.85); backdrop-filter: blur(10px); border-radius: 20px; padding: 20px; border: 1px solid rgba(255,255,255,0.1); z-index: 50; max-height: 60vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
.scoreboard-header { display: flex; align-items: center; justify-content: space-between; color: var(--spotlight); border-bottom: 2px solid rgba(255,255,255,0.1); padding-bottom: 15px; margin-bottom: 15px; font-weight: 800; letter-spacing: 1px; }
.score-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 0.95rem; align-items: center; }
.score-points { font-weight: bold; color: #10b981; background: rgba(16, 185, 129, 0.1); padding: 2px 8px; border-radius: 10px; }

/* ELDEKİ KARTLAR */
.hand-wrapper { position: absolute; bottom: 20px; left: 0; right: 0; display: flex; flex-direction: column; align-items: center; gap: 15px; z-index: 100; pointer-events: none; }
.draw-card-btn { background: #3b82f6; color: white; border: none; padding: 10px 25px; border-radius: 30px; font-weight: bold; cursor: pointer; display: flex; align-items: center; gap: 8px; pointer-events: auto; box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4); transition: 0.2s; }
.draw-card-btn:hover { transform: translateY(-3px); }
.draw-card-btn:disabled { background: #64748b; cursor: not-allowed; opacity: 0.7; transform: none; }
.my-hand-container { display: flex; gap: -60px; align-items: flex-end; justify-content: center; perspective: 1000px; pointer-events: auto; width: 90vw; overflow-x: visible; padding-bottom: 40px; padding-left: 40px; padding-right: 40px; }
.hand-card { background: white; color: #1a1a1a; width: 110px; height: 160px; border-radius: 12px; padding: 10px; font-size: 0.8rem; display: flex; align-items: center; justify-content: center; text-align: center; cursor: pointer; box-shadow: -5px 5px 15px rgba(0,0,0,0.3); font-weight: 600; border: 1px solid #e2e8f0; transition: transform 0.2s, z-index 0s; flex-shrink: 0; position: relative; background-image: linear-gradient(to bottom right, #ffffff, #f1f5f9); margin-right: -40px; }
.hand-card:hover { transform: translateY(-50px) rotate(0deg) scale(1.2) !important; z-index: 1000; box-shadow: 0 20px 50px rgba(0,0,0,0.6); margin-right: 20px; margin-left: 20px;}
.hand-card.disabled { opacity: 0.6; cursor: not-allowed; background: #94a3b8; transform: translateY(20px) !important; filter: grayscale(1); }

/* ORTA KARTLAR (FLIP & MASA) */
.table-center-area { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 400px; height: 300px; display: flex; justify-content: center; align-items: center; z-index: 50; pointer-events: none; }
.played-cards-grid { display: flex; gap: 15px; pointer-events: auto; flex-wrap: wrap; justify-content: center; align-items: center; }
.card-group-container { display: flex; flex-direction: column; align-items: center; cursor: default; transition: transform 0.2s; position: relative; }
.card-group-container.czar-selectable { cursor: pointer; }
.card-group-container.czar-selectable:hover { transform: scale(1.1); z-index: 100; }
.played-card-mini { width: 100px; height: 140px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.4); position: relative; transform-style: preserve-3d; transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
.played-card-mini.hidden { transform: rotateY(180deg); }
.played-card-mini.revealed { transform: rotateY(0deg); }
.card-front, .card-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 10px; display: flex; align-items: center; justify-content: center; box-sizing: border-box; }
.card-front { background: white; color: black; font-size: 0.8rem; padding: 10px; text-align: center; font-weight: 700; border: 2px solid white; z-index: 2; transform: rotateY(0deg); }
.card-back { background: #1e293b; background-image: linear-gradient(135deg, #1e293b 25%, #0f172a 25%, #0f172a 50%, #1e293b 50%, #1e293b 75%, #0f172a 75%, #0f172a 100%); background-size: 20px 20px; border: 2px solid #fff; color: white; font-size: 2rem; transform: rotateY(180deg); display: flex; align-items: center; justify-content: center; }
.card-back::after { content: "CAH"; font-family: 'Montserrat', sans-serif; font-weight: 900; opacity: 0.5; transform: rotate(-45deg); }
.played-card-mini:nth-child(2) { margin-top: -120px; margin-left: 10px; z-index: 10; }
.card-group-container.revealed-group .played-card-mini:nth-child(2) { margin-top: 10px; margin-left: 0; }
.owner-badge { position: absolute; bottom: -25px; left: 50%; transform: translateX(-50%); background: #333; color: white; font-size: 10px; padding: 4px 8px; border-radius: 5px; white-space: nowrap; font-weight: bold; }

/* WATERMARK & STATUS */
.table-wrapper::after { content: "CARDS AGAINST HUMANITY"; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-10deg); font-size: 2.5rem; font-weight: 900; color: rgba(255, 255, 255, 0.05); white-space: nowrap; pointer-events: none; font-family: 'Montserrat', sans-serif; z-index: 0; }
.game-status-msg { position: absolute; bottom: 270px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); padding: 12px 30px; border-radius: 30px; font-size: 1rem; color: #fff; pointer-events: none; width: auto; text-align: center; border: 1px solid rgba(255,255,255,0.2); box-shadow: 0 10px 30px rgba(0,0,0,0.5); font-weight: 600; }
.exit-btn { position: absolute; bottom: 30px; right: 30px; background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid #ef4444; padding: 10px 30px; border-radius: 12px; cursor: pointer; transition: 0.3s; z-index: 100; font-weight: bold; }
.exit-btn:hover { background: #ef4444; color: white; }

/* GAME OVER */
.game-over-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.95); display: flex; justify-content: center; align-items: center; z-index: 2000; backdrop-filter: blur(15px); }
.game-over-box { background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05)); border: 1px solid rgba(255,255,255,0.2); padding: 60px; border-radius: 40px; text-align: center; box-shadow: 0 0 100px rgba(255, 215, 0, 0.2), 0 20px 60px rgba(0,0,0,0.5); max-width: 500px; width: 90%; position: relative; overflow: hidden; }
.game-over-box::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: conic-gradient(transparent, rgba(255, 215, 0, 0.3), transparent 30%); animation: rotate 4s linear infinite; z-index: -1; }
@keyframes rotate { 100% { transform: rotate(360deg); } }
.game-over-box h1 { font-size: 3.5rem; margin: 0 0 10px 0; background: linear-gradient(to right, #FFD700, #fff, #FFD700); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-family: 'Montserrat', sans-serif; filter: drop-shadow(0 0 15px rgba(255,215,0,0.5)); }
.game-over-box p { color: #cbd5e1; font-size: 1.2rem; letter-spacing: 2px; text-transform: uppercase; }
.winner-display { margin-top: 40px; position: relative; display: inline-block; }
.winner-display img { width: 140px; height: 140px; border-radius: 50%; border: 5px solid #FFD700; box-shadow: 0 0 50px rgba(255, 215, 0, 0.6); object-fit: cover; }
.winner-display h2 { font-size: 2.5rem; margin: 20px 0 10px 0; color: white; text-shadow: 0 5px 15px rgba(0,0,0,0.5); }
.winner-score { background: #10b981; color: #fff; display: inline-block; padding: 8px 30px; border-radius: 30px; font-weight: 800; font-size: 1.5rem; box-shadow: 0 10px 25px rgba(16, 185, 129, 0.5); letter-spacing: 1px; }

/* YENİ EKLENENLER: SAYAÇ, PICK UYARISI, HAKEM EKRANI */
.timer-badge { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(15, 23, 42, 0.9); padding: 10px 25px; border-radius: 30px; border: 2px solid; display: flex; align-items: center; gap: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.5); z-index: 5000; backdrop-filter: blur(5px); }
.pick-instruction { background: #f59e0b; color: white; padding: 8px 20px; border-radius: 20px; font-weight: bold; margin-bottom: 10px; box-shadow: 0 0 15px rgba(245, 158, 11, 0.6); animation: bounce 1s infinite; }
@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
.czar-waiting-overlay { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; z-index: 100; background: rgba(0, 0, 0, 0.6); padding: 40px; border-radius: 30px; backdrop-filter: blur(4px); border: 2px solid rgba(255, 215, 0, 0.3); width: 300px; }
.czar-waiting-overlay h1 { color: #FFD700; margin: 15px 0; font-size: 2rem; text-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }
.czar-waiting-overlay p { color: white; font-size: 1.1rem; }

@media (max-width: 768px) {
    .split-inputs { flex-direction: column; gap: 0; }
    .login-screen { padding: 20px; width: 95%; }
    .login-title { font-size: 2rem; }
    .table-wrapper { transform: scale(0.5); margin-top: -60px; }
    .scoreboard { top: 65px; right: 10px; width: 130px; padding: 10px; font-size: 0.8rem; transform: none; max-height: 150px; border-radius: 12px; }
    .room-info { padding: 8px 15px; top: 10px; left: 10px; font-size: 0.8rem; border-radius: 20px; }
    .room-info h2 { font-size: 1rem; }
    .black-card-display { top: 15%; font-size: 0.9rem; padding: 15px; width: 85%; }
    .hand-card { width: 90px; height: 130px; font-size: 0.75rem; }
    .my-hand-container { gap: 5px; } 
    .top-controls { top: 10px; right: 10px; }
    .exit-btn { padding: 8px 20px; font-size: 0.8rem; bottom: 15px; right: 15px; }
    .game-status-msg { bottom: 220px; font-size: 0.9rem; padding: 10px 20px; width: 90%; }
    .timer-badge { top: 75px !important; }
    .start-game-btn, .finish-vote-btn { padding: 10px 30px; font-size: 1rem; }
}